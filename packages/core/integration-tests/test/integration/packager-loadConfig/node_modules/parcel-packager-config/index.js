// @flow strict-local

/*::
import type {ConfigOutput} from '@parcel/types';
*/

const invariant = require('assert');
const path = require('path');
const {Packager} = require('@parcel/plugin');
const {loadConfig} = require('@parcel/utils');

module.exports = (new Packager({
  async loadConfig({options, config}) {
    let result = await config.getConfigFrom(path.join(options.entryRoot, 'index'), ['foo.config.json']);
    config.setResult(result && result.contents);
  },
  package({bundle, config}) {
    invariant(config);
    return {contents: config.contents};
  },
}) /*: Packager */);
